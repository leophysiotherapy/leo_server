generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = "postgres://pohpkgbdodklux:08cd427d63aa6336827771b6c07729f267ba2439bc9473ff0d2b8cb39250cb65@ec2-3-212-29-93.compute-1.amazonaws.com:5432/dft2e343nio30c"
  shadowDatabaseUrl = "postgres://pohpkgbdodklux:08cd427d63aa6336827771b6c07729f267ba2439bc9473ff0d2b8cb39250cb65@ec2-3-212-29-93.compute-1.amazonaws.com:5432/dft2e343nio30c"
}

model user {
  userID       String        @id @default(cuid())
  email        String        @unique
  password     String
  role         roles
  verified     Boolean       @default(false)
  creatdAt     DateTime      @default(now()) @db.Timestamp(6)
  updateAt     DateTime      @default(now()) @db.Timestamp(6)
  diagnosis    diagnosis[]
  prescription presciption[]
  profile      profile?
  appointment  appointment[] @relation("appointmentTouser")
  blog         blogs[]       @relation("blogsTouser")
  equipment    equipment[]   @relation("equipmentTouser")
  faqs         faqs[]        @relation("faqsTouser")
  feedback     feedback[]    @relation("feedbackTouser")
  otp          otp[]         @relation("otpTouser")
}

model services {
  servicesID   String @id @default(cuid())
  services     String
  descriptions String
  image        String
  price        Float
}

model otp {
  otpID     String   @id @default(cuid())
  otp       String   @unique
  expiredAt DateTime @db.Timestamp(6)
  createdAt DateTime @db.Timestamp(6)
  user      user[]   @relation("otpTouser")
}

model appointment {
  appointmentID String    @id @default(cuid())
  date          DateTime  @db.Date
  time          String
  services      String?
  platform      platform
  link          String?
  amount        Int
  status        status    @default(upcoming)
  createdAt     DateTime  @default(now()) @db.Timestamp(6)
  updatedAt     DateTime  @default(now()) @db.Timestamp(6)
  feedbackID    String?
  feedback      feedback? @relation(fields: [feedbackID], references: [feedbackID])
  user          user[]    @relation("appointmentTouser")
}

model equipment {
  equipmentID String    @id @default(cuid())
  name        String
  inventory   inventory
  description String
  quantity    Int
  expireDate  DateTime  @db.Date
  creatdAt    DateTime  @default(now()) @db.Timestamp(6)
  updateAt    DateTime  @default(now()) @db.Timestamp(6)
  user        user[]    @relation("equipmentTouser")
}

model blogs {
  blogsID   String   @id @default(cuid())
  title     String
  content   String
  expertise String
  image     String
  createdAt DateTime @default(now()) @db.Timestamp(6)
  updatedAt DateTime @default(now()) @db.Timestamp(6)
  user      user[]   @relation("blogsTouser")
}

model faqs {
  faqsID   String   @id @default(cuid())
  faqs     String
  answer   String
  creatdAt DateTime @default(now()) @db.Timestamp(6)
  updateAt DateTime @default(now()) @db.Timestamp(6)
  user     user[]   @relation("faqsTouser")
}

model avatar {
  avatarID  String   @id @default(cuid())
  avatar    String
  creatdAt  DateTime @default(now()) @db.Timestamp(6)
  updateAt  DateTime @default(now()) @db.Timestamp(6)
  profileID String?  @unique
  profile   profile? @relation(fields: [profileID], references: [profileID])
}

model profile {
  profileID      String  @id @default(cuid())
  firstname      String
  lastname       String
  phone          String
  designation    String?
  expertise      String?
  emergencyPhone String?
  userID         String? @unique
  avatar         avatar?
  user           user?   @relation(fields: [userID], references: [userID])
}

model diagnosis {
  diagnosisID String   @id @default(cuid())
  diagnosis   String   @default(cuid())
  createdAt   DateTime @default(now()) @db.Timestamp(6)
  updatedAt   DateTime @default(now()) @db.Timestamp(6)
  userID      String?
  user        user?    @relation(fields: [userID], references: [userID])
}

model presciption {
  prescriptionID String   @id @default(cuid())
  prescription   String
  createdAt      DateTime @default(now()) @db.Timestamp(6)
  updatedAt      DateTime @default(now()) @db.Timestamp(6)
  userID         String?
  patinet        user?    @relation(fields: [userID], references: [userID])
}

model feedback {
  feedbackID  String        @id @default(cuid())
  feedback    String
  rating      Int
  creatdAt    DateTime      @default(now()) @db.Timestamp(6)
  updatedAt   DateTime      @default(now()) @db.Timestamp(6)
  appointment appointment[]
  user        user[]        @relation("feedbackTouser")
}

enum roles {
  patient
  admin
  staff
}

enum status {
  upcoming
  done
  finished
  canceled
}

enum platform {
  online
  f2f
}

enum notifStatus {
  read
  unread
}

enum inventory {
  equipment
  supplies
}
